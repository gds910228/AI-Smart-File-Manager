# AI智能文件管理器 MCP服务

一个基于MCP协议的AI智能文件管理服务，支持自然语言文件操作指令。

## 功能特性

### 🎯 核心功能
- **自然语言指令解析**: 支持中文和英文的自然语言文件操作指令
- **智能文件搜索**: 基于文件名、类型、大小、时间等条件的智能搜索
- **文件操作**: 移动、复制、删除、创建目录等基础文件操作
- **文件压缩**: 支持将多个文件打包成ZIP格式

### 🗣️ 支持的自然语言指令示例

#### 文件搜索
- "帮我找一下上周做的那个PPT"
- "把桌面上所有的图片都列出来"
- "查找大于10MB的视频文件"
- "找到昨天修改的所有文档"

#### 文件操作
- "把项目A文件夹复制到D盘"
- "删除下载文件夹里所有体积大于100MB的文件"
- "创建一个叫'财务报告'的文件夹"
- "把这些选中的文件打包成backup.zip"

### 🛠️ 可用工具

1. **natural_language_file_operation**: 主要工具，接受自然语言指令
2. **search_files**: 基于条件搜索文件
3. **move_files**: 移动文件到指定位置
4. **copy_files**: 复制文件到指定位置
5. **delete_files**: 删除文件或目录
6. **compress_files**: 压缩文件为ZIP格式
7. **extract_stock_codes**: 从文件名中提取股票代码

## 安装和使用

### 安装依赖
```bash
pip install -r requirements.txt
```

### 运行服务
```bash
python main.py
```

### MCP客户端配置
在您的MCP客户端配置文件中添加以下配置：

```json
{
  "mcpServers": {
    "mcp-file-manager": {
      "disabled": false,
      "timeout": 60,
      "type": "stdio",
      "command": "python",
      "args": [
        "D:/.../MCP/AI-Smart-File-Manager/main.py"
      ]
    }
  }
}
```

### 使用示例

#### 批量文件整理示例
**指令**: 
```
把目录F:\doc\理财相关\量化分析，里面的MD文件根据中文名称分别建立文件夹，然后把MD文件移动到相应的文件夹去。
```

**结果**: 自动识别MD文件，根据文件名中的公司名称创建对应文件夹并移动文件，形成整齐的分类目录结构。

#### 股票代码提取示例
**功能**: 从文件名中批量提取股票代码
**使用场景**: 量化分析文件整理、股票代码统计等

**工具调用**:
```json
{
  "tool": "extract_stock_codes",
  "arguments": {
    "directory_path": "F:\\doc\\mine\\理财相关\\量化分析",
    "output_file": "stock_codes.txt",
    "use_precise_pattern": true
  }
}
```

**支持的文件名格式**:
- `三一重工stock_analysis_sse_600031_20250808T040636.md` → 提取 `600031`
- `科大讯飞stock_analysis_sse_002230_20250808T081955.md` → 提取 `002230`

**结果**: 自动提取所有股票代码，去重排序后保存到文本文件，每个代码占一行。

### 在MCP客户端中使用
配置完成后，就可以使用自然语言进行文件操作了。
# AI智能文件管理器 MCP服务

一个基于MCP协议的AI智能文件管理服务，支持自然语言文件操作指令。

## 功能特性

### 🎯 核心功能
- **自然语言指令解析**: 支持中文和英文的自然语言文件操作指令
- **智能文件搜索**: 基于文件名、类型、大小、时间等条件的智能搜索
- **文件操作**: 移动、复制、删除、创建目录等基础文件操作
- **文件压缩**: 支持将多个文件打包成ZIP格式

### 🗣️ 支持的自然语言指令示例

#### 文件搜索
- "帮我找一下上周做的那个PPT"
- "把桌面上所有的图片都列出来"
- "查找大于10MB的视频文件"
- "找到昨天修改的所有文档"

#### 文件操作
- "把项目A文件夹复制到D盘"
- "删除下载文件夹里所有体积大于100MB的文件"
- "创建一个叫'财务报告'的文件夹"
- "把这些选中的文件打包成backup.zip"

### 🛠️ 可用工具

1. **natural_language_file_operation**: 主要工具，接受自然语言指令
2. **search_files**: 基于条件搜索文件
3. **move_files**: 移动文件到指定位置
4. **copy_files**: 复制文件到指定位置
5. **delete_files**: 删除文件或目录
6. **compress_files**: 压缩文件为ZIP格式


## 技术架构

```
用户指令 → MCP服务器 → AI指令解析器 → 文件操作执行器 → 操作系统文件系统
```

### 核心组件
- **AIFileManager**: 核心文件管理类
- **自然语言解析**: 意图识别和实体提取
- **文件操作引擎**: 基于Python标准库的文件操作
- **MCP服务器**: 标准MCP协议实现

## 支持的文件类型识别

- **图片**: jpg, jpeg, png, gif, bmp, svg
- **视频**: mp4, avi, mkv, mov, wmv, flv
- **文档**: doc, docx, pdf, txt, rtf
- **表格**: xls, xlsx, csv
- **演示**: ppt, pptx
- **音频**: mp3, wav, flac, aac

## 时间表达式支持

- 今天、昨天、前天
- 上周、上个月、去年
- 具体日期范围

## 安全特性

- 权限检查：避免访问受保护的系统目录
- 错误处理：优雅处理文件操作异常
- 日志记录：详细的操作日志

## 贡献

欢迎提交Issue和Pull Request来改进这个项目！

## 许可证

MIT License